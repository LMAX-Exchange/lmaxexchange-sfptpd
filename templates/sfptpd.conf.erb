# Puppet Managed configuration for sfptpd
[general]
<% @sync_module.each do |k,v| -%>
sync_module <%= k %> <% v.each do |n| -%><%= n %> <% end %>
<% end -%>
selection_policy <%= @selection_policy %>
selection_holdoff_interval <%= @selection_holdoff_interval %>
<% if @selection_policy_rules -%>
selection_policy_rules <%= @selection_policy_rules %>
<% end -%>
message_log <%= @message_log %>
<% if @stats_log -%>
stats_log <%= @stats_log %>
<% else -%>
stats_log off
<% end -%>
<% if @json_remote_monitor -%>
json_remote_monitor <%= @json_remote_monitor %>
<% end -%>
<% if @json_stats -%>
json_stats <%= @json_stats %>
<% end -%>
<% if @daemon -%>
daemon
<% else -%>
# daemon 
<% end -%>
lock <%= @lock %>
<% if @sync_interval -%>
sync_interval <%= @sync_interval %>
<% end -%>
<% if @local_sync_threshold -%>
local_sync_threshold <%= @local_sync_threshold %>
<% end -%>
clock_control <%= @clock_control %>
<% if @clock_list -%>
clock_list <%= @clock_list %>
<% end -%>
<% if @clock_readonly -%>
clock_readonly <%= @clock_readonly %>
<% end -%>
<% if @epoch_guard -%>
epoch_guard <%= @epoch_guard %>
<% end -%>
persistent_clock_correction <%= @persistent_clock_correction %>
<% if @timestamping_interfaces -%>
timestamping_interfaces <%= @timestamping_interfaces %>
<% end -%>
timestamping_disable_on_exit <%= @timestamping_disable_on_exit %>
non_solarflare_nics <%= @non_solarflare_nics %>
pid_filter_p <%= @pid_filter_p %>
pid_filter_i <%= @pid_filter_i %>
trace_level <%= @trace_level %>
outlier_filter_type <%= @outlier_filter_type %>
outlier_filter_type <%= @outlier_filter_type %>
outlier_filter_size <%= @outlier_filter_size %>
outlier_filter_adaption <%= @outlier_filter_adaption %>
fir_filter_size <%= @fir_filter_size %>

<% if @there_is_a_ptp_instance -%>
[ptp]
<% if @ptp_mgmt_msgs -%>
ptp_mgmt_msgs <%= @ptp_mgmt_msgs %>
<% end -%>
<% if @ptp_max_foreign_records -%>
ptp_max_foreign_records <%= @ptp_max_foreign_records %>
<% end -%>
<% if @ptp_uuid_filtering -%>
ptp_uuid_filtering <%= @ptp_uuid_filtering %>
<% end -%>
<% if @ptp_domain_filtering -%>
ptp_domain_filtering <%= @ptp_domain_filtering %>
<% end -%>
<% end -%>

<% if @there_is_a_pps_instance -%>
[pps]
<% if @time_of_day -%>
time_of_day <%= @time_of_day %>
<% end -%>
<% end -%>
